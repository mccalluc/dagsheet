<page>
    <!-- Globals -->
    <box id="f" x="15" y="2" w="30">f = function(a, b, n, nw, w){var ns=n[1]-1; var ws=w[1]-1; var nws=nws[1]+1; if (a==b &amp;&amp; nws&gt;=ns &amp;&amp; nws&gt;ws) return ["\",nws] else if () return ["|",ns] else return ["-",ws] }</box>
    <box id="h" x="6" y="3.5" w="5">h = "ABC"</box>
    <box id="v" x="6" y="5" w="5">v = "BCD"</box>

    <!-- Column labels -->
    <box id="1" x="6" y="8">h[0]</box>
    <box id="2" x="10" y="8">h[1]</box>
    <box id="3" x="14" y="8">h[2]</box>

    <!-- Row labels -->
    <box id="10" x="2" y="10">h[0]</box>
    <box id="20" x="2" y="12">h[1]</box>
    <box id="30" x="2" y="14">h[2]</box>

    <!-- Lattice -->
    <box id="11" x="6" y="10">f(h[0],v[0],n,nw,w)</box>
    <box id="12" x="10" y="10">f(h[1],v[0],n,nw,w)</box>
    <box id="13" x="14" y="10">f(h[2],v[0],n,nw,w)</box>

    <box id="21" x="6" y="12">f(h[0],v[1],n,nw,w)</box>
    <box id="22" x="10" y="12">f(h[1],v[1],n,nw,w)</box>
    <box id="23" x="14" y="12">f(h[2],v[1],n,nw,w)</box>

    <box id="31" x="6" y="14">f(h[0],v[2],n,nw,w)</box>
    <box id="32" x="10" y="14">f(h[1],v[2],n,nw,w)</box>
    <box id="33" x="14" y="14">f(h[2],v[2],n,nw,w)</box>

    <!-- N Arrows -->
    <arrow from="11" to="21">n</arrow>
    <arrow from="12" to="22">n</arrow>
    <arrow from="13" to="23">n</arrow>
    <arrow from="21" to="31">n</arrow>
    <arrow from="22" to="32">n</arrow>
    <arrow from="23" to="33">n</arrow>

    <!-- W Arrows -->
    <arrow from="11" to="12">w</arrow>
    <arrow from="12" to="13">w</arrow>
    <arrow from="21" to="22">w</arrow>
    <arrow from="22" to="23">w</arrow>
    <arrow from="31" to="32">w</arrow>
    <arrow from="32" to="33">w</arrow>

    <!-- NW Arrows -->
    <arrow from="11" to="22">nw</arrow>
    <arrow from="12" to="23">nw</arrow>
    <arrow from="21" to="32">nw</arrow>
    <arrow from="22" to="33">nw</arrow>
</page>